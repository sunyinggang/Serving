(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b84dffb2"],{"318a":function(t,e,i){"use strict";i.r(e);var a,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"service-main"},[i("div",{staticClass:"service-b"},[i("div",{staticClass:"service-tit"},[t._v("\n            Service\n        ")]),i("el-table",{attrs:{data:t.serviceData,height:"100%","header-cell-style":{background:"#fff"}}},[i("el-table-column",{attrs:{prop:"name",label:"Name","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"host",label:"Host","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"port",label:"Port","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{sortable:"",prop:"weight",label:"Weight","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.showEdit!==e.$index?i("span",[t._v("\n                        "+t._s(e.row.weight)+"\n                    ")]):i("el-input",{staticClass:"input",attrs:{placeholder:""},on:{input:t.inputweight},model:{value:t.weight,callback:function(e){t.weight=t._n(e)},expression:"weight"}})]}}])}),i("el-table-column",{attrs:{label:"Operation",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.showEdit!==e.$index?i("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"16px","margin-left":"15px"},attrs:{type:"text"},on:{click:function(i){return t.edit(e.row,e.$index)}}}):i("span",[i("el-button",{staticClass:"el-icon-check",staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:t.confirmEdit}}),i("el-button",{staticClass:"el-icon-close",staticStyle:{"font-size":"16px",color:"#C6C8CC"},attrs:{type:"text"},on:{click:function(e){t.showEdit=-1}}})],1),e.row.needVerify?i("el-button",{staticStyle:{"font-size":"14px","margin-left":"15px"},attrs:{type:"text"},on:{click:function(i){return t.verify(e.row)}}},[t._v("Verify")]):t._e()]}}])})],1),t.fverifyVisible?i("div",[i("el-dialog",{staticClass:"fverifydialog",attrs:{visible:t.fverifyVisible,title:"Request body",showClose:t.cancel,width:"35%",top:t.fverifydialogTop,center:""},on:{"update:visible":function(e){t.fverifyVisible=e}}},[i("div",{staticClass:"verifyinput"},[i("el-form",{ref:"json",attrs:{model:t.json,rules:t.rules,"label-width":"0px"}},[i("el-form-item",{attrs:{prop:"verifydata"}},[i("el-input",{attrs:{rows:7,type:"textarea"},on:{blur:t.inputCompleted},model:{value:t.json.verifydata,callback:function(e){t.$set(t.json,"verifydata",e)},expression:"json.verifydata"}})],1)],1)],1),i("span",{staticClass:"dialog-footer  dialog-but"},[i("el-button",{attrs:{disabled:!t.json.verifydata,type:"primary"},on:{click:t.confirmVerify}},[t._v("Verify")])],1),t.responseVisible?i("div",[i("div",{staticClass:"response"},[t._v("Response")]),i("div",{staticClass:"verifyinput"},[i("div",{staticClass:"response-data"},[t._v("\n                        "+t._s(t.responseData)+"\n                    ")])]),i("span",{staticClass:"dialog-footer  dialog-but",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.fverifyVis}},[t._v("Close")])],1)]):t._e()])],1):t._e(),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)])},n=[],r=i("7618"),o=(i("28a5"),i("b775")),l=window.location.href,c=l.split("/");function f(t){return Object(o["a"])({url:"".concat(a,"/api/service/list"),method:"get",params:t})}function u(t){return Object(o["a"])({url:"".concat(a,"/api/service/update"),method:"post",data:t})}function h(t,e){return Object(o["a"])({url:"".concat(a,"/api/validate/")+e,method:"post",data:t})}a="#"===c[3]||""===c[3]?"":"/"+c[3];var d={name:"service",components:{},data:function(){var t=this,e=function(e,i,a){t.isJSON(i)?a():a(new Error("Please enter the text in JSON."))};return{currentPage:1,total:0,cancel:!1,serviceData:[],showEdit:-1,version:"",weight:0,rowData:{},page:1,pageSize:20,fverifyVisible:!1,responseVisible:!1,fverifydialogTop:"15%",verifydata:"",responseData:"",options:[{value:"ALL_ALLOWED",label:"ALL_ALLOWED"},{value:"VERSION_BIGER",label:"VERSION_BIGER"},{value:"VERSION_BIGTHAN_OR_EQUAL",label:"VERSION_BIGTHAN_OR_EQUAL"},{value:"VERSION_SMALLER",label:"VERSION_SMALLER"},{value:"VERSION_EQUALS",label:"VERSION_EQUALS"}],routerMode:"",json:{verifydata:""},rules:{verifydata:[{trigger:"blur",validator:e}]}}},watch:{fverifyVisible:function(t){var e=this;t||setTimeout(function(){e.responseVisible=!1,e.fverifydialogTop="15%",e.json.verifydata=""},200)}},computed:{},created:function(){this.initserviceList()},methods:{initserviceList:function(){var t=this,e={page:this.page,pageSize:this.pageSize};f(e).then(function(e){t.serviceData=e.data.rows,t.total=e.data.total})},handleSizeChange:function(t){},handleCurrentChange:function(t){this.page=t,this.initserviceList()},edit:function(t,e){this.showEdit=e,this.rowData=t,this.weight=t.weight},verify:function(t){this.rowData=t,this.fverifyVisible=!0,"batchInference"===t.callName?(this.json.verifydata={serviceId:t.environment,batchDataList:[{featureData:{x0:1.88669,x1:-1.359293,x2:2.303601,x3:2.00137,x4:1.307686},sendToRemoteFeatureData:{device_id:"aaaaa",phone_num:"122222222"}},{featureData:{x0:1.88669,x1:-1.359293,x2:2.303601,x3:2.00137,x4:1.307686},sendToRemoteFeatureData:{device_id:"aaaaa",phone_num:"122222222"}}]},this.json.verifydata=JSON.stringify(JSON.parse(JSON.stringify(this.json.verifydata)),null,4)):"inference"===t.callName&&(this.json.verifydata={serviceId:t.environment,featureData:{x0:1.88669,x1:-1.359293,x2:2.303601,x3:2.00137,x4:1.307686},sendToRemoteFeatureData:{id:123}},this.json.verifydata=JSON.stringify(JSON.parse(JSON.stringify(this.json.verifydata)),null,4))},fverifyVis:function(){this.fverifyVisible=!1,this.initserviceList()},isJSON:function(t){if("string"===typeof t)try{var e=JSON.parse(t);return!("object"!==Object(r["a"])(e)||!e)}catch(i){return!1}},inputCompleted:function(){if(!this.isJSON(this.json.verifydata))return!1;this.json.verifydata=JSON.stringify(JSON.parse(this.json.verifydata),null,4)},confirmVerify:function(){var t=this,e="";if(this.$refs["json"].validate(function(i){if(!i)return!1;e=t.json.verifydata}),e){this.responseVisible=!0,this.fverifydialogTop="9%";var i=this.json.verifydata;i=JSON.parse(i),i.host=this.rowData.host,i.port=this.rowData.port,h(i,this.rowData.callName).then(function(e){t.responseData=JSON.stringify(e.data,null,4)})}},confirmEdit:function(){var t=this;this.showEdit=-1;var e={host:this.rowData.host,port:this.rowData.port,url:this.rowData.url,weight:this.weight};u(e).then(function(e){t.initserviceList()})},inputweight:function(){var t=/^[0-9]+$/;t.test(this.weight)||(this.weight=""),this.weight=this.weight+"",this.weight.length>=3&&"100"!==this.weight?"100"===this.weight.substring(0,3)?this.weight=this.weight.substring(0,3):this.weight=this.weight.substring(0,2):this.weight<0&&""!==this.weight&&(this.weight=0)}}},p=d,v=(i("5b70"),i("2877")),g=Object(v["a"])(p,s,n,!1,null,null,null);e["default"]=g.exports},"5b70":function(t,e,i){"use strict";var a=i("e87a"),s=i.n(a);s.a},e87a:function(t,e,i){}}]);